---
machine:
  python:
    version: 2.7.6
  environment:
    BEETBOX_HOME: /home/ubuntu/beetbox
    BEETBOX_DEPENDENCIES: https://raw.githubusercontent.com/drupalmel/beetbox/master/tests/dependencies.sh
dependencies:
  pre:
    - curl -fsSL $BEETBOX_DEPENDENCIES | bash
test:
  override:
    - sudo cp -rf ~/$CIRCLE_PROJECT_REPONAME/* $BEETBOX_HOME/ansible/roles/${CIRCLE_PROJECT_REPONAME/ansible-role-/thomtoogood.}
    - sudo cp ~/$CIRCLE_PROJECT_REPONAME/tests/config.yml $BEETBOX_HOME/ansible/vagrant.config.yml
    - sudo $BEETBOX_HOME/ansible/build.sh
